# 软件架构⭐⭐⭐⭐⭐⭐⭐⭐

## 概念

#### 架构的本质

1. 架构为软件系统提供了一个**结构、行为和属性的高级抽象**
2. 软件架构风格是特定应用领域的**惯用模式**，架构定义**一个词汇表和一组约束**

#### 架构的作用

1. 项目干系人进行交流的手段
2. 软件架构是**可传递和可复用的模型**
3. 软件架构是推理和控制的更改更加简单，**有助于循序渐进的原型设计**

架构在**需求分析之后，软件设计之前**，架构设计就是需求分配，即将**满足需求的职责分配到组件上**

所以软件架构的作用主要偏向于非功能性能方面，并不是用于解决具体问题的圭臬。

### 架构的“4+1”视图

和UML“4+1”视图类似

- 逻辑视图： 功能需求（类与对象）
- 开发视图：软件管理
- 进程视图（过程视图）：性能、吞吐量
- 物理视图（ 部署视图 ）：系统拓朴、安装

## 软件架构风格⭐⭐⭐⭐

| 五大架构风格  |                子风格                |
| :-----------: | :----------------------------------: |
|  数据流风格   |         批处理、管道-过滤器          |
| 调用/返回风格 |  主程序/子程序、面向对象、层次结构   |
| 独立构件风格  | 进程通信、事件驱动系统（ 隐式调用 ） |
|  虚拟机风格   |           解释器、规则系统           |
|   仓库风格    |   数据库系统、黑板系统、超文本系统   |

### 数据流风格

数据在流水线的各个节点上被加工。每完成一个环节，数据流都会被送入下一个环节，最终输出处理后的完整结果。

在实际开发中，比如webpack的loader就是典型的数据流风格

优点：

- 松耦合
- 良好的重用性/可维护性
- 可扩展性【标准接口适配】
- 良好的隐蔽性
- 支持并行

缺点：

- 交互性较差
- 复杂性较高
- 性能较差（每个过滤器都需要解析与合成数据）

两个子风格：

| 风格        | 内容关键                       |
| ----------- | ------------------------------ |
| 批处理序列  | 大量**整体**数据，无需用户交互 |
| 管道-过滤器 | **流式数据**、弱用户交互       |

### 调用/返回风格

最常见的风格，现代代码中已经离不开这种架构，比如：简单的函数调用等

包含**分层架构风格**子风格

分层架构：MVC、MVP、三层架构等

### 独立构件风格

**构件之间不直接交互**，达成松耦合

例如： 事件驱动系统

### 虚拟机风格

Java虚拟机，Java跨平台优点。

两个子风格：

- 解释器：适合需要自定义规则的场合
- 规则为中心：在解释器的基础上增加经验规则， 适用于专家系统

### 仓库风格（以数据为中心）

两个子风格和其应用场景

- 数据库系统：数据库
- 黑板系统： **语音识别**、模式识别、图像处理、知识推理

### 闭环控制风格（过程控制）

1. 适合于嵌入式系统，用于解决简单闭环控制问题
2. 经典应用：空调温控，定速巡航。

### C2风格

C2架构风格是一种常见的层次体系架构风格。

该架构风格概括而言，是由连接件绑定的按一定规则运行的并行构件网络，在该架构风格中，各构件之间不能直接连接，只能通过连接件的异步通信机制进行交互，使得构件的替换或更新不影响架构，这种方式体现了高内聚，松耦合的设计思想。

有以下特点：

- **构件之间不能直接连接**
- **构件，连接件都有顶部与底部**
- **构件顶部或底部只能与连接件底部或顶部相连**
- **连接件相互之间可通过顶部及底部连接**( 由其中的一个底部连接另一个的顶部 )
- 构件不感知下一层构件
- 构件可以感知上一层构件
- 构件之间通过连接件的异步消息机制交互





